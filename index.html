import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Progress } from "@/components/ui/progress";
import { Badge } from "@/components/ui/badge";
import { RocketIcon, WalletIcon, UsersIcon } from "lucide-react";

export default function USDTMiningApp() {
  const [usdt, setUsdt] = useState(825.43);
  const [minedUsdt, setMinedUsdt] = useState(0.79);
  const [hashrate, setHashrate] = useState(3);
  const [rhc, setRhc] = useState(9300);

  useEffect(() => {
    const interval = setInterval(() => {
      setMinedUsdt((prev) => parseFloat((prev + hashrate * 0.00001).toFixed(8)));
    }, 1000);
    return () => clearInterval(interval);
  }, [hashrate]);

  return (
    <main className="p-4 max-w-md mx-auto">
      <h1 className="text-xl font-bold text-center mb-4">USDT Mining</h1>

      <Tabs defaultValue="home" className="w-full">
        <TabsList className="grid grid-cols-3 mb-4">
          <TabsTrigger value="home">Anasayfa</TabsTrigger>
          <TabsTrigger value="friends">Arkadaşlar</TabsTrigger>
          <TabsTrigger value="wallet">Cüzdan</TabsTrigger>
        </TabsList>

        {/* Anasayfa */}
        <TabsContent value="home">
          <Card>
            <CardContent className="p-4 space-y-4">
              <div className="flex items-center justify-between">
                <Badge variant="outline">Hashrate: {hashrate} GH/s ⚡</Badge>
                <Button size="sm" onClick={() => setHashrate((h) => h + 1)}>
                  Booster ⚡
                </Button>
              </div>

              <div className="text-center">
                <div className="text-4xl font-semibold">{minedUsdt.toFixed(8)} USDT</div>
                <Progress value={(minedUsdt % 1) * 100} />
              </div>

              <Button className="w-full" onClick={() => setUsdt(usdt + minedUsdt)}>
                Ödül Al
              </Button>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Arkadaşlar */}
        <TabsContent value="friends">
          <Card>
            <CardContent className="p-4 space-y-4">
              <p className="text-center">Her davet edilen arkadaş için +1000 RHC</p>
              <div className="grid grid-cols-3 gap-2">
                <Button variant="outline">Telegram</Button>
                <Button variant="outline">WhatsApp</Button>
                <Button variant="outline">Link Kopyala</Button>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Cüzdan */}
        <TabsContent value="wallet">
          <Card>
            <CardContent className="p-4 space-y-4">
              <div className="flex items-center justify-between">
                <span>RHC</span>
                <span>{rhc}</span>
              </div>
              <div className="flex items-center justify-between">
                <span>USDT</span>
                <span>{(usdt + minedUsdt).toFixed(2)} USDT</span>
              </div>
              <Button className="w-full" variant="outline">
                Çekim Yap
              </Button>
              <Button className="w-full" variant="secondary">
                Cüzdan Adresini Ayarla
              </Button>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </main>
  );
}
